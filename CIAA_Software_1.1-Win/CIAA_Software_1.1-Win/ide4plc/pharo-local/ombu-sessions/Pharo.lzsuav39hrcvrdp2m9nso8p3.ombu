OmEntry {	#tags : {		#author : 'Unknown',		#time : DateAndTime [ '2019-07-17T17:17:29.039215-03:00' ],		#prior : OmReference [ 'Pharo.cq14jji58ixos22j7erici2z1', '27' ],		#self : OmReference [ '1' ]	},	#content : EpMethodModification {		#oldMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#className : #PasteUpMorph,				#isMetaSide : false			},			#name : #'handlesMouseDown:',			#protocol : #'event handling',			#sourceCode : 'handlesMouseDown: evt\r\t\r\t^false.',			#stamp : 'Anonymous 7/17/2019 17:17',			#package : #Morphic-Core		},		#newMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#className : #PasteUpMorph,				#isMetaSide : false			},			#name : #'handlesMouseDown:',			#protocol : #'event handling',			#sourceCode : 'handlesMouseDown: evt\r\t\r\t^true.',			#stamp : 'Anonymous 7/17/2019 17:17',			#package : #Morphic-Core		}	}}OmEntry {	#tags : {		#author : 'Unknown',		#time : DateAndTime [ '2019-07-17T17:22:08.898215-03:00' ],		#prior : OmReference [ '1' ],		#self : OmReference [ '2' ]	},	#content : EpMethodModification {		#oldMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#className : #PLC_HorizontalLinkMorph,				#isMetaSide : false			},			#name : #'drawElementOn:',			#protocol : #drawing,			#sourceCode : 'drawElementOn: aCanvas\r\t"Dibujo el rectangulo negro que representa al horizonta link."\r\r\taCanvas fillRectangle: self hBar color: self userInteractionStateLayer1 elementColor.',			#stamp : 'EricPernia 4/29/2013 13:58',			#package : #IDE4PLC		},		#newMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#className : #PLC_HorizontalLinkMorph,				#isMetaSide : false			},			#name : #'drawElementOn:',			#protocol : #drawing,			#sourceCode : 'drawElementOn: aCanvas\r\t"Dibujo el rectangulo negro que representa al horizonta link."\r\r\taCanvas fillRectangle: self hBar color: Color red.',			#stamp : 'Anonymous 7/17/2019 17:22',			#package : #IDE4PLC		}	}}OmEntry {	#tags : {		#author : 'Unknown',		#time : DateAndTime [ '2019-07-17T17:25:03.179215-03:00' ],		#prior : OmReference [ '2' ],		#self : OmReference [ '3' ]	},	#content : EpMethodAddition {		#method : RGMethodDefinition {			#annotations : IdentityDictionary {				#className : #'PLC_FunctionBlock class',				#isMetaSide : true			},			#name : #'createEricFunctionBlockDeclarationWithType:',			#protocol : #'Std Counters',			#sourceCode : 'createEricFunctionBlockDeclarationWithType: aDataType\r\t"Crea y devuelve una Declaración del Bloque de Función estándar CTD_aDataType"\r\r\t| pouDecl |\r\t\r\t"DECLARACION DE POU"\r\r\tpouDecl := self\r\t\tnewWithName: \'ERIC\'\r\t\tandDataType: aDataType.\r\t\t\r\t"Agrego la función a la biblioteca de funciones estándar"\t\t\r\tself addStdFunctionBlock: pouDecl.\t\r\r\t"DECLARACIONES DE VARIABLES DE LA POU"\r\r\t"Agrego una declaracion de variable de entrada"\r\tpouDecl inputVarDecls add: ( \r\t\tPLC_SymbolicVariableDecl \r\t\t\tnewWithDataType: PLC_DataType Bool\r\t\t\tandInitialValue: nil \r\t\t\tandIdentifier: \'CD\' \r\t\t).\t\r\r\t"Agrego una declaracion de variable de entrada"\r\tpouDecl inputVarDecls add: ( \r\t\tPLC_SymbolicVariableDecl \r\t\t\tnewWithDataType: PLC_DataType Bool\r\t\t\tandInitialValue: nil \r\t\t\tandIdentifier: \'LD\' \r\t\t).\t\r\t\t\t\r\t"Agrego una declaracion de variable de entrada"\r\tpouDecl inputVarDecls add: ( \r\t\tPLC_SymbolicVariableDecl \r\t\t\tnewWithDataType: aDataType\r\t\t\tandInitialValue: nil \r\t\t\tandIdentifier: \'PV\' \r\t\t).\t\r\t\t\t\r\t"Agrego una declaracion de variable de salida"\r\tpouDecl outputVarDecls add: ( \r\t\tPLC_SymbolicVariableDecl \r\t\t\tnewWithDataType: PLC_DataType Bool\r\t\t\tandInitialValue: nil \r\t\t\tandIdentifier: \'Q\' \r\t\t).\r\t\t\t\r\t"Agrego una declaracion de variable de salida"\r\tpouDecl outputVarDecls add: ( \r\t\tPLC_SymbolicVariableDecl \r\t\t\tnewWithDataType: aDataType\r\t\t\tandInitialValue: nil \r\t\t\tandIdentifier: \'CV\' \r\t\t).\r\t\t\t\t\t\t\r\t"Agrego una declaracion de variable interna persistente de instancia"\r\t"( StdFunctionBlocks at: \'R_EDGE_BOOL\' ) Obtengo la declaración de REDGE desde la biblioteca"\r\tpouDecl varDecls add: ( \r\t\t( PLC_FunctionBlock StdFunctionBlocks at: \'R_TRIG_BOOL\')\r\t\t\tinstanceDeclForForFBWithIdentifier: \'R_TRIG_IN\'\r\t\t).\r\r\r\t"CUERPO DE LA POU"\r\r\t"Es un cuerpo estandar"\r\tpouDecl pouBody: PLC_StandardBody new.\r\t\r\t"Agrego la POU que llama esta pou estandar en su interior"\r\tpouDecl pouBody calledPOUs: ( PLC_FunctionBlock StdFunctionBlocks at: \'R_TRIG_BOOL\').\r\t\r\tpouDecl pouBody cCode: \'\r\t\r\t\tconst PLC_INT PVmin = -32768; // Ver esto que esta medio confuso en el estandar,\r\t\t\t\t\t\t\t\t\t  // le puse el minimo de PLC Int\r\t\t\t\t\t\t\t\t\t\r\t\r\t\t// Utilización del FB instancia R_TRIG_IN.\r\t\t// Lo que sigue implementa: CAL R_TRIG_IN(CLK:=CD, Q=>CD)\r\t\t(pxPOU->R_TRIG_IN).CLK = pxPOU->CD;\t// Completo los parametros VAR_INPUT de REDGE\r\t\tPLC_FB_R_TRIG_BOOL( &(pxPOU->R_TRIG_IN) );\t// Llamo a la función pasandole la estructura por referencia\r\t\tpxPOU->CD = (pxPOU->R_TRIG_IN).Q;\t// Grabo los parametros VAR_OUTPUT de REDGE a las variables\r\t\t\t\t\t\t\t\t\t\t\t\t\t// a las cuales estan igualadas las VAR_OUTPUT de REDGE\r\r\t\tif( pxPOU->LD )\r\t\t{\r\t\t\tpxPOU->CV = pxPOU->PV;\r\t\t}\r\t\telse\r\t\t{\r\t\t\tif( pxPOU->CD && (pxPOU->CV > PVmin) )\r\t\t\t{\r\t\t\t\t(pxPOU->CV)--;\r\t\t\t}\r\t\t}\r\t\tpxPOU->Q = (pxPOU->CV <= 0);\r\'.\r\t\t\r\t^ pouDecl.',			#stamp : 'Anonymous 7/17/2019 17:25',			#package : #IDE4PLC		}	}}OmEntry {	#tags : {		#author : 'Unknown',		#time : DateAndTime [ '2019-07-17T17:26:12.627215-03:00' ],		#prior : OmReference [ '3' ],		#self : OmReference [ '4' ]	},	#content : EpMethodModification {		#oldMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#className : #'PLC_FunctionBlock class',				#isMetaSide : true			},			#name : #createCounterFunctionBlockDeclarations,			#protocol : #'Std Function Blocks',			#sourceCode : 'createCounterFunctionBlockDeclarations\r\t"Crea y guarda en la biblioteca los bloques de funcion Contadores"\r\t\r\t"CTU"\r\tself createCTUFunctionBlockDeclarationWithType: PLC_DataType Int.\r\r\t"CTD"\r\tself createCTDFunctionBlockDeclarationWithType:  PLC_DataType Int.\r\t\r\t"CTUD"\r\tself createCTUDFunctionBlockDeclarationWithType:  PLC_DataType Int.\r\t\r\t',			#stamp : 'EricPernia 11/19/2013 07:00',			#package : #IDE4PLC		},		#newMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#className : #'PLC_FunctionBlock class',				#isMetaSide : true			},			#name : #createCounterFunctionBlockDeclarations,			#protocol : #'Std Function Blocks',			#sourceCode : 'createCounterFunctionBlockDeclarations\r\t"Crea y guarda en la biblioteca los bloques de funcion Contadores"\r\t\r\t"CTU"\r\tself createCTUFunctionBlockDeclarationWithType: PLC_DataType Int.\r\r\t"CTD"\r\tself createCTDFunctionBlockDeclarationWithType:  PLC_DataType Int.\r\t\r\t"Eric"\r\tself createEricFunctionBlockDeclarationWithType:  PLC_DataType Int.\r\t\r\t"CTUD"\r\tself createCTUDFunctionBlockDeclarationWithType:  PLC_DataType Int.\r\t\r\t',			#stamp : 'Anonymous 7/17/2019 17:26',			#package : #IDE4PLC		}	}}OmEntry {	#tags : {		#author : 'Unknown',		#time : DateAndTime [ '2019-07-17T17:27:30.178215-03:00' ],		#prior : OmReference [ '4' ],		#self : OmReference [ '5' ]	},	#content : EpMethodModification {		#oldMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#className : #PasteUpMorph,				#isMetaSide : false			},			#name : #'handlesMouseDown:',			#protocol : #'event handling',			#sourceCode : 'handlesMouseDown: evt\r\t\r\t^true.',			#stamp : 'Anonymous 7/17/2019 17:17',			#package : #Morphic-Core		},		#newMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#className : #PasteUpMorph,				#isMetaSide : false			},			#name : #'handlesMouseDown:',			#protocol : #'event handling',			#sourceCode : 'handlesMouseDown: evt\r\t\r\t^false.',			#stamp : 'Anonymous 7/17/2019 17:27',			#package : #Morphic-Core		}	}}